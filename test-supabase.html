<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>اختبار Supabase</title>
  <style>
    body{font-family:system-ui;margin:30px}
    pre{background:#f3f3f3;padding:12px;border-radius:10px;overflow:auto}
    .ok{color:#0a7a0a}
    .bad{color:#b00020}
  </style>
</head>
<body>
  <h3>اختبار الاتصال بـ Supabase</h3>
  <div id="status">جارٍ الاختبار...</div>
  <pre id="out"></pre>

  <script type="module">
    const status = document.getElementById("status");
    const out = document.getElementById("out");

    try {
      const { supabase } = await import("./shared/supabaseClient.js");
      const { data, error } = await supabase.from("pages").select("slug,title_ar").limit(5);
      if (error) throw error;
      status.className = "ok";
      status.textContent = "OK";
      out.textContent = JSON.stringify(data, null, 2);
    } catch (e) {
      status.className = "bad";
      status.textContent = "ERROR";
      out.textContent = (e?.message || String(e));
    }
  </script>
</body>
</html>
